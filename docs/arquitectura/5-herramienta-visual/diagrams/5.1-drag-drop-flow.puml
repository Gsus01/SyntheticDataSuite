@startuml drag_drop_flow
title Drag and Drop - Node Creation

skinparam participant {
    BackgroundColor #e3f2fd
    BorderColor #1565c0
}

actor User
participant "Sidebar\n(Catalog)" as Sidebar
participant "Canvas\n(React Flow)" as Canvas
database "Template\nIndex" as Templates

User -> Sidebar : Browse nodes by category
Sidebar -> Templates : Load node templates
Templates --> Sidebar : Template definitions

User -> Sidebar : Drag node
activate Sidebar
Sidebar -> Sidebar : Attach metadata\n(template, params, ports)
Sidebar --> User : Drag preview
deactivate Sidebar

User -> Canvas : Drop at position (x, y)
activate Canvas
Canvas -> Canvas : Calculate position\nin flow coordinates
Canvas -> Canvas : Create node instance
Canvas -> Canvas : Assign artifact ports\nfrom template
Canvas --> User : Node rendered\non canvas
deactivate Canvas

note right of Canvas
  **Node is ready:**
  • Connect to other nodes
  • Configure parameters
  • Upload input files
end note

@enduml
