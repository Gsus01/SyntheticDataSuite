@startuml artifact_passing_pattern
title Artifact Passing Pattern - Data Flow Between Steps

skinparam participant {
    BackgroundColor #e1f5fe
    BorderColor #01579b
}
skinparam database {
    BackgroundColor #fff3e0
    BorderColor #e65100
}

actor User as U
participant "Argo\nOrchestrator" as Argo #e8f5e9
database "S3 Storage\n(MinIO)" as S3
participant "Step 1:\nPreprocessing" as S1
participant "Step 2:\nTraining" as S2
participant "Step 3:\nGeneration" as S3b

== Initialization ==
U -> S3 : Upload input data
U -> Argo : Submit workflow

== Step 1: Preprocessing ==
Argo -> S1 : Start pod
activate S1
S3 -> S1 : Mount input artifact
S1 -> S3 : Write processed data
deactivate S1
S1 -> Argo : Complete

== Step 2: Training ==
Argo -> S2 : Start pod (depends on Step 1)
activate S2
S3 -> S2 : Mount processed data
S2 -> S3 : Write trained model
deactivate S2
S2 -> Argo : Complete

== Step 3: Generation ==
Argo -> S3b : Start pod (depends on Step 2)
activate S3b
S3 -> S3b : Mount trained model
S3b -> S3 : Write synthetic data
deactivate S3b
S3b -> Argo : Complete

== Results ==
Argo -> U : Workflow completed
U -> S3 : Download results

note right of S3
  **Key Points:**
  • No direct communication
    between containers
  • All data flows through S3
  • Each step is independent
end note

@enduml
