@startuml backend_components
title Backend API - Component Diagram (Prototype)

left to right direction
skinparam linetype ortho

skinparam component {
    BackgroundColor<<api>> #2196F3
    FontColor<<api>> White
    BackgroundColor<<logic>> #4CAF50
    FontColor<<logic>> White
    BackgroundColor<<data>> #FF9800
    FontColor<<data>> White
    BackgroundColor<<external>> #607D8B
    FontColor<<external>> White
}

rectangle "Backend API (FastAPI)" as backend {
    
    rectangle "API Layer" {
        component "REST\nEndpoints" as api <<api>>
    }
    
    rectangle "Business Logic" {
        component "Workflow\nBuilder" as builder <<logic>>
        component "Execution\nController" as execution <<logic>>
        component "Workflow\nStore" as store <<logic>>
        component "Artifact\nManager" as artifacts <<logic>>
    }
    
    rectangle "Configuration" {
        component "Catalog\nLoader" as catalog <<data>>
        component "Image\nValidator" as validator <<data>>
    }
}

rectangle "External Systems" {
    component "MinIO\n(S3)" as minio <<external>>
    component "Argo\nWorkflows" as argo <<external>>
    component "Kubernetes" as k8s <<external>>
}

' API delegates to business logic
api --> builder
api --> execution
api --> store
api --> artifacts

' Business logic uses configuration
builder --> catalog

' Business logic uses external systems
store --> minio
artifacts --> minio
execution --> argo
validator --> k8s

@enduml
