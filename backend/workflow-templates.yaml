templates:
  preprocessing:
    inputs:
      artifacts:
        - name: source-data
          path: /data/inputs/input.csv
        - name: preprocessing-config
          path: /data/config/preprocessing.yaml
    securityContext:
      runAsUser: 0
      runAsGroup: 0
    container:
      image: docker.io/library/preprocessing:latest
      imagePullPolicy: Never
      command: [python, preprocess.py]
    outputs:
      artifacts:
        - name: processed-data
          path: /data/outputs/preprocessed_input.csv
          archive:
            none: {}

  train-hmm-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-hmm-config
          path: /data/config/training_hmm.json
    container:
      image: docker.io/library/training-hmm:latest
      imagePullPolicy: Never
      command: [python, entrenar_modelo.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/hmm_model.pkl
          archive:
            none: {}

  generate-hmm-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/hmm_model.pkl
          archive:
            none: {}
        - name: generation-hmm-config
          path: /data/config/generation_hmm.json
    container:
      image: docker.io/library/generation-hmm:latest
      imagePullPolicy: Never
      command: [python, generar_datos.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_hmm_model.csv
          archive:
            none: {}

  train-gaussian-process-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-gaussian-process-config
          path: /data/config/training_gaussian_process.json
    container:
      image: docker.io/library/training-gaussian_process:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/gaussian_process_model.pkl
          archive:
            none: {}

  generate-gaussian-process-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/gaussian_process_model.pkl
          archive:
            none: {}
        - name: generation-gaussian-process-config
          path: /data/config/generation_gaussian_process.json
    container:
      image: docker.io/library/generation-gaussian_process:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_gaussian_process_model.csv
          archive:
            none: {}

  train-copulas-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-copulas-config
          path: /data/config/training_copulas.json
    container:
      image: docker.io/library/training-copulas:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/copulas_model.pkl
          archive:
            none: {}

  generate-copulas-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/copulas_model.pkl
          archive:
            none: {}
        - name: generation-copulas-config
          path: /data/config/generation_copulas.json
    container:
      image: docker.io/library/generation-copulas:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_copulas_model.csv
          archive:
            none: {}

  train-boltzman-machines-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-boltzman-machines-config
          path: /data/config/training_boltzman_machines.json
    container:
      image: docker.io/library/training-boltzman_machines:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/rbm_model.pkl
          archive:
            none: {}

  generate-boltzman-machines-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/rbm_model.pkl
          archive:
            none: {}
        - name: generation-boltzman-machines-config
          path: /data/config/generation_boltzman_machines.json
    container:
      image: docker.io/library/generation-boltzman_machines:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_rbm_model.csv
          archive:
            none: {}

  train-bayesian-networks-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-bayesian-networks-config
          path: /data/config/training_bayesian_networks.json
    container:
      image: docker.io/library/training-bayesian_networks:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/bayesian_network_model.pkl
          archive:
            none: {}

  generate-bayesian-networks-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/bayesian_network_model.pkl
          archive:
            none: {}
        - name: generation-bayesian-networks-config
          path: /data/config/generation_bayesian_networks.json
    container:
      image: docker.io/library/generation-bayesian_networks:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_bayesian_network_model.csv
          archive:
            none: {}

  # ============================================================================
  # GAN (Generative Adversarial Networks)
  # ============================================================================
  train-gan-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-gan-config
          path: /data/config/training_gan.json
    container:
      image: docker.io/library/training-GAN:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/gan_model.pkl
          archive:
            none: {}

  generate-gan-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/gan_model.pkl
          archive:
            none: {}
        - name: generation-gan-config
          path: /data/config/generation_gan.json
    container:
      image: docker.io/library/generation-GAN:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_gan_model.csv
          archive:
            none: {}

  # ============================================================================
  # Normalising Flows
  # ============================================================================
  train-normalising-flows-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-normalising-flows-config
          path: /data/config/training_normalising_flows.json
    container:
      image: docker.io/library/training-Normalising_Flows:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/normalising_flows_model.pkl
          archive:
            none: {}

  generate-normalising-flows-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/normalising_flows_model.pkl
          archive:
            none: {}
        - name: generation-normalising-flows-config
          path: /data/config/generation_normalising_flows.json
    container:
      image: docker.io/library/generation-Normalising_Flows:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_normalising_flows_model.csv
          archive:
            none: {}

  # ============================================================================
  # ARIMA-SARIMA
  # ============================================================================
  train-arima-sarima-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-arima-sarima-config
          path: /data/config/training_arima_sarima.json
    container:
      image: docker.io/library/training-arima-sarima:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/arima_sarima_model.pkl
          archive:
            none: {}

  generate-arima-sarima-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/arima_sarima_model.pkl
          archive:
            none: {}
        - name: generation-arima-sarima-config
          path: /data/config/generation_arima_sarima.json
    container:
      image: docker.io/library/generation-arima-sarima:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_arima_sarima_model.csv
          archive:
            none: {}

  # ============================================================================
  # Difusion
  # ============================================================================
  train-difusion-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-difusion-config
          path: /data/config/training_difusion.json
    container:
      image: docker.io/library/training-difusion:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/difusion_model.pkl
          archive:
            none: {}

  generate-difusion-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/difusion_model.pkl
          archive:
            none: {}
        - name: generation-difusion-config
          path: /data/config/generation_difusion.json
    container:
      image: docker.io/library/generation-difusion:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_difusion_model.csv
          archive:
            none: {}

  # ============================================================================
  # Genetic Algorithms
  # ============================================================================
  train-genetic-algorithms-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-genetic-algorithms-config
          path: /data/config/training_genetic_algorithms.json
    container:
      image: docker.io/library/training-genetic_algorithms:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/genetic_algorithms_model.pkl
          archive:
            none: {}

  generate-genetic-algorithms-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/genetic_algorithms_model.pkl
          archive:
            none: {}
        - name: generation-genetic-algorithms-config
          path: /data/config/generation_genetic_algorithms.json
    container:
      image: docker.io/library/generation-genetic-algorithms:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_genetic_algorithms_model.csv
          archive:
            none: {}

  # ============================================================================
  # Kernel Density Estimators
  # ============================================================================
  train-kernel-density-estimators-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-kernel-density-estimators-config
          path: /data/config/training_kernel_density_estimators.json
    container:
      image: docker.io/library/training-kernel_density_estimators:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/kernel_density_estimators_model.pkl
          archive:
            none: {}

  generate-kernel-density-estimators-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/kernel_density_estimators_model.pkl
          archive:
            none: {}
        - name: generation-kernel-density-estimators-config
          path: /data/config/generation_kernel_density_estimators.json
    container:
      image: docker.io/library/generation-kernel_density_estimators:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_kernel_density_estimators_model.csv
          archive:
            none: {}

  # ============================================================================
  # Sparse Coding
  # ============================================================================
  train-sparse-coding-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-sparse-coding-config
          path: /data/config/training_sparse_coding.json
    container:
      image: docker.io/library/training-sparse_coding:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/sparse_coding_model.pkl
          archive:
            none: {}

  generate-sparse-coding-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/sparse_coding_model.pkl
          archive:
            none: {}
        - name: generation-sparse-coding-config
          path: /data/config/generation_sparse_coding.json
    container:
      image: docker.io/library/generation-sparse_coding:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_sparse_coding_model.csv
          archive:
            none: {}

  # ============================================================================
  # Variational Autoencoders (VAE)
  # ============================================================================
  train-variational-autoencoders-model:
    inputs:
      artifacts:
        - name: processed-data
          path: /data/inputs/preprocessed_input.csv
          archive:
            none: {}
        - name: training-variational-autoencoders-config
          path: /data/config/training_variational_autoencoders.json
    container:
      image: docker.io/library/training-variational_autoencoders:latest
      imagePullPolicy: Never
      command: [python, model_generation.py]
    outputs:
      artifacts:
        - name: trained-model
          path: /data/outputs/vae_model.pkl
          archive:
            none: {}

  generate-variational-autoencoders-data:
    inputs:
      artifacts:
        - name: trained-model
          path: /data/inputs/vae_model.pkl
          archive:
            none: {}
        - name: generation-variational-autoencoders-config
          path: /data/config/generation_variational_autoencoders.json
    container:
      image: docker.io/library/generation-variational_autoencoders:latest
      imagePullPolicy: Never
      command: [python, data_generation.py]
    outputs:
      artifacts:
        - name: synthetic-data
          path: /data/outputs/synthetic_vae_model.csv
          archive:
            none: {}

  train-gym-pybullet-rl:
    inputs:
      artifacts:
        - name: training-gym-pybullet-config
          path: /data/config/variables.json
    container:
      image: docker.io/library/rl-gym-pybullet:latest
      imagePullPolicy: Never
      command: [python, /app/rl_example.py]
    outputs:
      artifacts:
        - name: rl-metrics
          path: /data/outputs/metrics.json
          archive:
            none: {}
        - name: rl-best-model
          path: /data/outputs/best_model.zip
          archive:
            none: {}
        - name: rl-final-model
          path: /data/outputs/final_model.zip
          archive:
            none: {}
        - name: rl-evaluations
          path: /data/outputs/evaluations.npz
          archive:
            none: {}

  bouncing-ball:
    inputs:
      artifacts:
        - name: bouncing-ball-config
          path: /tmp/config/bouncing_ball.json
    container:
      image: docker.io/library/bouncing-ball:latest
      imagePullPolicy: Never
      command: [python3, /app/run_simulation.py]
      args:
        [
          "--config",
          "{{inputs.artifacts.bouncing-ball-config.path}}",
          "--output",
          "/tmp/output/bouncing_ball.json",
        ]
    outputs:
      artifacts:
        - name: bouncing-ball-output
          path: /tmp/output/bouncing_ball.json
          archive:
            none: {}
